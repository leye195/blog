---
title: GA4 - 내부 트래픽 필터링
slug: ga4-internal-traffic
date: 2023-05-25
tags: ['Dev', 'TIL']
---

사내 내부 IP를 제외한 보고서를 GA에서 확인하고 싶다는 요청이 들어오게 되어 관련하여 어떤 설정과 과정을 거쳐야 되는것인지에 대하여 정리하는 목적으로 작성한 글 입니다.

**1. 내부 트래픽 정의**

- GA4에 어떤 IP로 들어오는 트래픽인지 알려주기 위한 설정으로 다음과 같은 과정을 거치게 된다.
- [데이터 스트림] > 내부 트래픽 제외 적용을 하고자하는 도메인 선택
- 세부정보 화면에서 [태그 설정 구성] 선택, 태그 설정 구성 페이지의 [설정]의 모두 표시를 클릭한 뒤 목록의 [내부 트래픽 정의] 선택
- 내부 트래픽 정의에서 [만들기] 클릭 한 뒤, 내부 트래픽으로 규정할 IP 주소 입력 뒤 상단의 [만들기] 버튼 클릭하여 저장
  ![Untitled](https://github.com/leye195/coinat-v2/assets/30601503/2a8ab3d5-355a-492f-81e5-7ed2d5aa32fb)

**2. 데이터 필터 사용 설정 확인**

[데이터 필터] 메뉴에서 필터의 상태 우선 확인, 별도 설정을 하지않은 경우 기본상태로 `테스트` 로 설정됨

![Untitled](https://github.com/leye195/coinat-v2/assets/30601503/53918a83-cc29-46ee-8360-ffed55bc3d75)

Internal Traffic을 클릭하면 다음과 같은 정보들이 있으며 3가지 필터 종류가 있는것을 확인 할 수 있다.

- **테스트**: (디폴트 값), 필터링된 데이터가 보고서에서 완전히 제외되는것이 아닌 측정 기준을 통해 보고서에서 확인 가능
- **활성**: 필터링된 데이터는 보고서에서 제거됨
- **비활성**: 데이터 필터링이 이루어지지 않음
  ![스크린샷 2023-05-25 오후 9 49 18](https://github.com/leye195/coinat-v2/assets/30601503/f3bfe2bc-0387-4b16-9c19-7e4f2eb66fde)

**3. 데이터 필터 테스트**

데이터 필터가 테스트 상태로 적용된 상태에서 필터링이 잘 작동하는지 테스트 하는 방법은 다음과 같습니다.

- 디버그 모드를 활성화 한 뒤 웹사이트로 접속한 뒤 [Debug View]를 확인하면 이벤트의 매개변수로 `traffic_type: internal` 이 포함 여부를 확인하여 내부 트래픽인지 확인 할 수 있다.

  ![Untitled](https://github.com/leye195/coinat-v2/assets/30601503/33b7fdb8-5f94-4f88-b838-b7efa64d16b4)

**4. 데이터 필터 최종 활성화**

테스트가 완료되어 보고서에 내부 트래픽 데이터를 영구 제외 처리하고자 한다면 필터 상태를 활성으로 변경해준다. 물론 매번 측정 기준 설정을 통해 필터링을 하는것이 귀찮지 않다면 필터 상태를 테스트로 유지해도 상관 없다.

### 참고:

- https://brunch.co.kr/@mobiinside/4145
- https://osoma.kr/blog/ga4-internal-traffic-filtering/#chapter1
